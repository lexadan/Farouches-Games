FROM node:18-alpine as production

WORKDIR /usr/src/app
COPY package*.json ./
COPY tsconfig.json ./

EXPOSE 3000
ENV NODE_ENV=production
RUN npm install\
        && npm install typescript -g
COPY . .
RUN tsc
CMD ["node", "./dist/src/server.js"]
